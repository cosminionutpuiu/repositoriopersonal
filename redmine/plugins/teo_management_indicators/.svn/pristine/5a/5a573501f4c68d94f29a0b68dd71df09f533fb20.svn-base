module UpdateIssues
  class updateIssues
    require 'net/https'
    require 'uri'
    require 'json'

    def actualizar
      update_issue_status(132, '', '')
    end

    def update_issue_status issue_id, new_status_id, change_note
      base_url = "http://localhost:10084" 
      api_token = "xxxxxxxxxxxxxxx" 

      payload = {
        issue: {          
        }
      }

      url = "#{base_url}/issues/#{issue_id}.json" 
      uri = URI.parse(url)
      req = Net::HTTP::Put.new(uri.request_uri)

      req["Content-Type"] = "application/json" 
      req['X-Redmine-API-Key'] = api_token
      req.body = payload.to_json

      http = Net::HTTP.new(uri.host, uri.port)
      http.use_ssl = true
      response = http.request(req)
      return response
    end
  end
end
